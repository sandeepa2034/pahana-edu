<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pahana Edu - Register</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/css/modern-design-system.css" rel="stylesheet">
    <link href="/css/register.css" rel="stylesheet">
</head>
<body>
    <a href="/" class="back-home">
        <i class="fas fa-arrow-left"></i>
        Back to Home
    </a>
    
    <div class="register-container">
        <div class="left-section">
            <div class="logo-section">
                <div class="logo">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="welcome-text">
                    <h1>Join Pahana Edu</h1>
                    <p>Start your educational journey with us and unlock a world of knowledge</p>
                </div>
                
                <div class="benefits">
                    <ul>
                        <li>
                            <i class="fas fa-book"></i>
                            <span>Access to thousands of educational books</span>
                        </li>
                        <li>
                            <i class="fas fa-shipping-fast"></i>
                            <span>Fast and secure delivery</span>
                        </li>
                        <li>
                            <i class="fas fa-award"></i>
                            <span>Exclusive educational resources</span>
                        </li>
                        <li>
                            <i class="fas fa-users"></i>
                            <span>Join our learning community</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="right-section">
            <div class="form-header">
                <h2>Create Account</h2>
                <p>Join thousands of learners already using Pahana Edu</p>
            </div>

            <!-- Alert Messages -->
            <div th:if="${error}" class="alert alert-danger">
                <i class="fas fa-exclamation-circle"></i>
                <span th:text="${error}"></span>
            </div>
            
            <div th:if="${message}" class="alert alert-success">
                <i class="fas fa-check-circle"></i>
                <span th:text="${message}"></span>
            </div>

            <form th:action="@{/register}" method="post" class="register-form">
                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="firstName" class="form-label">
                            <i class="fas fa-user me-2"></i>First Name
                        </label>
                        <input type="text" 
                               class="form-control" 
                               id="firstName" 
                               name="firstName" 
                               required 
                               placeholder="Enter your first name"
                               th:value="${customer?.firstName}">
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName" class="form-label">
                            <i class="fas fa-user me-2"></i>Last Name
                        </label>
                        <input type="text" 
                               class="form-control" 
                               id="lastName" 
                               name="lastName" 
                               required 
                               placeholder="Enter your last name"
                               th:value="${customer?.lastName}">
                    </div>
                </div>

                <div class="form-group">
                    <label for="username" class="form-label">
                        <i class="fas fa-at me-2"></i>Username
                    </label>
                    <input type="text" 
                           class="form-control" 
                           id="username" 
                           name="username" 
                           required 
                           placeholder="Choose a unique username">
                </div>

                <div class="form-group">
                    <label for="email" class="form-label">
                        <i class="fas fa-envelope me-2"></i>Email Address
                    </label>
                    <input type="email" 
                           class="form-control" 
                           id="email" 
                           name="email" 
                           required 
                           placeholder="Enter your email address"
                           th:value="${customer?.email}">
                </div>

                <div class="form-group">
                    <label for="phoneNumber" class="form-label">
                        <i class="fas fa-phone me-2"></i>Phone Number (Optional)
                    </label>
                    <input type="tel" 
                           class="form-control" 
                           id="phoneNumber" 
                           name="phoneNumber" 
                           placeholder="Enter your phone number (optional)"
                           th:value="${customer?.phoneNumber}">
                </div>

                <div class="form-group">
                    <label for="address" class="form-label">
                        <i class="fas fa-map-marker-alt me-2"></i>Address
                    </label>
                    <textarea class="form-control" 
                              id="address" 
                              name="address" 
                              rows="2" 
                              required 
                              placeholder="Enter your full address"
                              th:text="${customer?.address}"></textarea>
                </div>

                <div class="form-group">
                    <label for="role" class="form-label">
                        <i class="fas fa-user-tag me-2"></i>Account Type
                    </label>
                    <select class="form-control" 
                            id="role" 
                            name="role" 
                            required>
                        <option value="">Select account type</option>
                        <option value="USER" selected>Customer Account</option>
                        <option value="ADMIN">Administrator Account</option>
                    </select>
                    <small class="form-text text-muted">Choose Customer for regular shopping or Administrator for management access</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="password" class="form-label">
                            <i class="fas fa-lock me-2"></i>Password
                        </label>
                        <input type="password" 
                               class="form-control" 
                               id="password" 
                               name="password" 
                               required 
                               placeholder="Create a strong password">
                        <div class="password-strength">
                            <div class="strength-indicator">
                                <div class="strength-bar"></div>
                            </div>
                            <small class="strength-text text-muted">Use 8+ characters with a mix of letters, numbers & symbols</small>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword" class="form-label">
                            <i class="fas fa-lock me-2"></i>Confirm Password
                        </label>
                        <input type="password" 
                               class="form-control" 
                               id="confirmPassword" 
                               name="confirmPassword" 
                               required 
                               placeholder="Confirm your password">
                    </div>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" 
                           id="termsAccepted" 
                           name="termsAccepted" 
                           required>
                    <label for="termsAccepted">
                        I agree to the <a href="/terms" target="_blank">Terms of Service</a> 
                        and <a href="/privacy" target="_blank">Privacy Policy</a>
                    </label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" 
                           id="newsletter" 
                           name="newsletter">
                    <label for="newsletter">
                        Subscribe to our newsletter for educational updates and special offers
                    </label>
                </div>

                <button type="submit" class="btn-modern btn-primary w-100">
                    <i class="fas fa-user-plus"></i>
                    Create Account
                </button>

                <div class="login-link">
                    <p>Already have an account? <a href="/login">Sign in here</a></p>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Password strength indicator
        document.getElementById('password').addEventListener('input', function(e) {
            const password = e.target.value;
            const strengthIndicator = document.querySelector('.strength-indicator');
            const strengthText = document.querySelector('.strength-text');
            
            let strength = 0;
            
            if (password.length >= 8) strength++;
            if (password.match(/[a-z]/)) strength++;
            if (password.match(/[A-Z]/)) strength++;
            if (password.match(/[0-9]/)) strength++;
            if (password.match(/[^a-zA-Z0-9]/)) strength++;
            
            strengthIndicator.className = 'strength-indicator';
            
            if (strength === 0) {
                strengthText.textContent = 'Use 8+ characters with a mix of letters, numbers & symbols';
                strengthText.className = 'strength-text text-muted';
            } else if (strength <= 2) {
                strengthIndicator.classList.add('strength-weak');
                strengthText.textContent = 'Weak password';
                strengthText.className = 'strength-text text-danger';
            } else if (strength === 3) {
                strengthIndicator.classList.add('strength-medium');
                strengthText.textContent = 'Medium strength';
                strengthText.className = 'strength-text text-warning';
            } else if (strength === 4) {
                strengthIndicator.classList.add('strength-good');
                strengthText.textContent = 'Good password';
                strengthText.className = 'strength-text text-info';
            } else {
                strengthIndicator.classList.add('strength-strong');
                strengthText.textContent = 'Strong password';
                strengthText.className = 'strength-text text-success';
            }
        });
        
        // Password confirmation validation
        document.getElementById('confirmPassword').addEventListener('input', function(e) {
            const password = document.getElementById('password').value;
            const confirmPassword = e.target.value;
            
            if (confirmPassword && password !== confirmPassword) {
                e.target.setCustomValidity('Passwords do not match');
            } else {
                e.target.setCustomValidity('');
            }
        });
    </script>
</body>
</html>